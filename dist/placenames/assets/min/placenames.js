"use strict";function AboutService(e){var t={show:!1,ingroup:!1,stick:!1};return e.getConfig("about").then(function(e){t.items=e}),{getState:function(){return t}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ContributorsService(e){var t={show:!1,ingroup:!1,stick:!1};return e.get("placenames/resources/config/contributors.json").then(function(e){t.orgs=e.data}),{getState:function(){return t}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function ResultsService(e,t,n,r,a,i,o){var s,c=7,l={showPan:function(e){return this.show(e).then(function(e){var t=e.map;return t.panTo(e.location,{animate:!0}),t.getZoom()<c&&t.setZoom(c,{animate:!0}),e})},clear:function(e){e.searched=null,r(function(){n.$broadcast("clear.button.fired")},10)},show:function(e){return this.hide().then(function(t){var n=e.location.split(" ").reverse().map(function(e){return+e});return s=L.popup().setLatLng(n).setContent(e.name+"<br/>Lat/Lng: "+n[0]+"&deg;"+n[1]+"&deg;").openOn(t),{location:n,map:t,marker:s}})},download:function(t){this.config.then(function(n){e.get(n.esriTemplate.replace("${id}",t.join(","))).then(function(e){var t=new Blob([JSON.stringify(e,null,3)],{type:"application/json;charset=utf-8"});saveAs(t,"gazetteer-esri-features-"+Date.now()+".json")})})},hide:function(e){return i.getMap().then(function(e){return s&&e.removeLayer(s),e})},get config(){return a.getConfig().then(function(e){return e.results})},moreDocs:function(e){if(e){var t=e.data.response,n=t.docs.length;if(!(n>=t.numFound)){var r=e.params;r.start=n,o.request(r).then(function(e){var n;(n=t.docs).push.apply(n,_toConsumableArray(e.response.docs))})}}}};return l}function SearchService(e,t,n,r,a,i){function o(e){return c().then(function(n){return n.q="recordId:"+e,l(n).then(function(e){return y.persist(n,e).then(function(){return t.$broadcast("pn.search.complete",e),e})})})}function s(){return c().then(function(e){return l(e).then(function(n){return y.persist(e,n).then(function(){return t.$broadcast("pn.search.complete",n),n})})})}function c(){return i.getMap().then(function(e){return a.getAll().then(function(t){var n=f(),r="object"===_typeof(g.filter),a=r?g.filter.name:g.filter;n.fq=d(e),n["facet.heatmap.geom"]=m(e),n.sort=p(e),n.q=a?"*"+a.toLowerCase():"*:*";var i=[],o=[];switch(g.filterBy){case"group":t.groups.filter(function(e){return e.selected}).forEach(function(e){i.push('group:"'+e.name+'"')});break;case"feature":t.features.filter(function(e){return e.selected}).forEach(function(e){i.push('feature:"'+e.name+'"')});break;case"category":t.categories.filter(function(e){return e.selected}).forEach(function(e){i.push('category:"'+e.name+'"')})}return t.authorities.filter(function(e){return e.selected}).forEach(function(e){o.push("authority:"+e.code)}),o.length&&(n.q+=" AND ("+o.join(" ")+")"),i.length&&(n.q+=" AND ("+i.join(" ")+")"),n})})}function l(e){return u(e).then(function(e){return e.facetCounts={},t.$broadcast("pn.facets.changed",e.facet_counts.facet_fields),e})}function u(t){return e({url:"/select?",method:"GET",params:t,cache:!0}).then(function(e){return e.data})}function p(e){var t=e.getBounds(),n=(t.getEast()-t.getWest())/2,r=(t.getNorth()-t.getSouth())/2;return"geodist(ll,"+(t.getSouth()+r)+","+(t.getWest()+n)+") asc"}function d(e){var t=e.getBounds();return"location:["+Math.max(t.getSouth(),-90)+","+Math.max(t.getWest(),-180)+" TO "+Math.min(t.getNorth(),90)+","+Math.min(t.getEast(),180)+"]"}function m(e){var t=e.getBounds();return"["+Math.max(t.getSouth(),-90)+","+Math.max(t.getWest(),-180)+" TO "+Math.min(t.getNorth(),90)+","+Math.min(t.getEast(),180)+"]"}function f(){return{"facet.heatmap.format":"ints2D","facet.heatmap":"location",facet:!0,"facet.field":["feature","category","authority"],rows:50,wt:"json"}}var h,g={searched:null},v=[],y={onMapUpdate:function(e){v.push(e)},offMapUpdate:function(e){delete v[e]},get data(){return g},filtered:function(){return s().then(function(e){return g.filtered=e,e})},request:function(e){return u(e)},search:function(e){var t=this;e?o(e.recordId).then(function(){return t.searched()}):this.searched()},persist:function(e,t){return g.persist={params:e,data:t},i.getMap().then(function(e){return g.persist.bounds=e.getBounds()})},searched:function(){g.searched=g.persist,this.hide()},show:function(e){this.hide().then(function(t){var n=e.location.split(" ").reverse().map(function(e){return+e});h=L.popup().setLatLng(n).setContent(e.name+"<br/>Lat/Lng: "+n[0]+"&deg;"+n[1]+"&deg;").openOn(t)})},hide:function(e){return i.getMap().then(function(e){return h&&e.removeLayer(h),e})}};return i.getMap().then(function(e){function t(){n.cancel(r),g.searched||(r=n(function(){y.filtered()},200),v.forEach(function(e){e()}))}var r;e.on("resize moveend viewreset",t)}),y}AboutService.$inject=["configService"],angular.module("placenames.about",[]).directive("placenamesAbout",["$interval","aboutService",function(e,t){return{templateUrl:"placenames/about/about.html",scope:{},link:function(n,r){var a=void 0;n.about=t.getState(),n.over=function(){e.cancel(a),n.about.ingroup=!0},n.out=function(){a=e(function(){n.about.ingroup=!1},1e3)},n.unstick=function(){n.about.ingroup=n.about.show=n.about.stick=!1,r.find("a").blur()}}}}]).directive("placenamesAboutLink",["$interval","aboutService",function(e,t){return{restrict:"AE",templateUrl:"placenames/about/button.html",scope:{},link:function(n){var r=void 0;n.about=t.getState(),n.over=function(){e.cancel(r),n.about.show=!0},n.toggleStick=function(){n.about.stick=!n.about.stick,n.about.stick||(n.about.show=n.about.ingroup=!1)},n.out=function(){r=e(function(){n.about.show=!1},700)}}}}]).factory("aboutService",AboutService),angular.module("placenames.bounds",[]).directive("placenamesBounds",["flashService","messageService","boundsService",function(e,t,n){var r=void 0;return{restrict:"AE",link:function(){n.init().then(null,null,function(n){switch(e.remove(r),n.type){case"error":case"warn":case"info":t[n.type](n.text);break;default:e.remove(r),r=e.add(n.text,n.duration?n.duration:8e3,"wait"===n.type)}})}}}]).factory("boundsService",["$http","$q","$rootScope","$timeout","configService","flashService",function(e,t,n,r,a,i){function o(e,t,n){f&&f.notify({text:e,type:t,duration:n})}function s(e){var n=t.defer(),a=p(e);if(a&&a.code)switch(a.code){case"oversize":r(function(){o("","clear"),o("The selected area is too large to process. Please restrict to approximately 2 degrees square.","error"),n.resolve(a)});break;case"undersize":r(function(){o("","clear"),o("X Min and Y Min should be smaller than X Max and Y Max, respectively. Please update the drawn area.","error"),n.resolve(a)});break;default:return t.when(a)}return n.promise}function c(e){var t=(e.xMax-e.xMin)*(e.yMax-e.yMin);return t<1e-11||e.xMax<e.xMin}function l(e){var t=Math.abs((e.xMax-e.xMin)*(e.yMax-e.yMin));return t>2e3}function u(e){e.xMax=null===e.xMax?null:+e.xMax,e.xMin=null===e.xMin?null:+e.xMin,e.yMax=null===e.yMax?null:+e.yMax,e.yMin=null===e.yMin?null:+e.yMin}function p(e){return u(e),l(e)?{code:"oversize"}:c(e)?{code:"undersize"}:null===e.xMax?{code:"incomplete"}:d(e)?{code:"success"}:{code:"invalid"}}function d(e){return e&&angular.isNumber(e.xMax)&&angular.isNumber(e.xMin)&&angular.isNumber(e.yMax)&&angular.isNumber(e.yMin)&&!l(e)&&!c(e)}function m(t){a.getConfig("processing").then(function(r){var a=r.intersectsUrl;if(a){var i=a.replace("{maxx}",t.xMax).replace("{minx}",t.xMin).replace("{maxy}",t.yMax).replace("{miny}",t.yMin);o("Checking there is data in your selected area...","wait",18e4),e.get(i).then(function(e){if(e.data&&e.data.available_data){var t="There is no data held in your selected area. Please try another area.";o("","clear"),e.data.available_data&&e.data.available_data.forEach(function(e){e.downloadables&&(t="There is intersecting data. Select downloads from the list.")}),o(t,null,4e3),n.$broadcast("site.selection",e.data)}},function(e){o("The service that provides the list of datasets is currently unavailable. Please try again later.","error")})}})}var f=void 0;return{init:function(){return f=t.defer(),n.$on("placenames.clip.drawn",function(e,t){o("Area drawn. Checking for data..."),s(t).then(function(e){"success"===e.code?(n.$broadcast("placenames.bounds.draw",[t.xMin,t.yMin,t.xMax,t.yMax]),m(t)):n.$broadcast("placenames.clip.draw",{message:"oversize"})})}),f.promise},cancelDraw:function(){drawService.cancelDrawRectangle()},checkSize:function(e){return s(e)}}}]),angular.module("placenames.authorities",[]).directive("placenamesAuthorities",["groupsService","placenamesSearchService",function(e,t){return{restrict:"EA",templateUrl:"placenames/authorities/authorities.html",link:function(n){e.getAuthorities().then(function(e){return n.authorities=e}),n.change=function(e){t.filtered()}}}}]);var RootCtrl=function e(t,n){var r=this;_classCallCheck(this,e),n.getMap().then(function(e){r.map=e}),t.getConfig().then(function(e){r.data=e})};RootCtrl.$invoke=["configService","mapService"],angular.module("PlacenamesApp",["explorer.config","explorer.confirm","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.info","explorer.message","explorer.modal","explorer.persist","explorer.projects","explorer.version","exp.ui.templates","explorer.map.templates","ui.bootstrap","ngAutocomplete","ngRoute","ngSanitize","page.footer","geo.baselayer.control","geo.draw","geo.map","geo.maphelper","geo.measure","placenames.about","placenames.bounds","placenames.clusters","placenames.contributors","placenames.download","placenames.extent","placenames.filters","placenames.header","placenames.maps","placenames.navigation","placenames.panes","placenames.popover","placenames.proxy","placenames.quicksearch","placenames.reset","placenames.results","placenames.search","placenames.side-panel","placenames.splash","placenames.templates","placenames.toolbar","placenames.utils"]).config(["configServiceProvider","persistServiceProvider","projectsServiceProvider","versionServiceProvider",function(e,t,n,r){e.location("placenames/resources/config/config.json?v=4"),e.dynamicLocation("placenames/resources/config/configclient.json?"),r.url("placenames/assets/package.json"),t.handler("local"),n.setProject("placenames")}]).controller("RootCtrl",RootCtrl).filter("bytes",function(){return function(e,t){if(isNaN(parseFloat(e))||!isFinite(e))return"-";"undefined"==typeof t&&(t=0);var n=["bytes","kB","MB","GB","TB","PB"],r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(r))).toFixed(t)+" "+n[r]}}).factory("userService",[function(){function e(){return!0}return{login:e,hasAcceptedTerms:e,setAcceptedTerms:e,getUsername:function(){return"anon"}}}]),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,a=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null===e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,c=a(r.length),l=t(n)?Object(new n(c)):new Array(c),u=0;u<c;)s=r[u],o?l[u]="undefined"==typeof i?o(s,u):o.call(i,s,u):l[u]=s,u+=1;return l.length=c,l}}()),angular.module("placenames.autoscroll",[]).directive("autoScroll",["$timeout","$rootScope",function(e,t){return{scope:{trigger:"@",y:"@",height:"@"},link:function(n,r,a){var i,o,s;s=n.height?+n.height:100,o=s,r.on("scroll",function(c){var l,u,p=r.scrollTop(),d=r.find(a.autoScroll),m=d.height(),f=r.height();f>=m||(l=m-p-f,u=o<l,o=l,l<s&&!u&&(i&&e.cancel(i),i=e(function(){t.$broadcast(n.trigger)},30)))})}}}]),angular.module("placenames.categories",[]).directive("placenamesCategories",["groupsService","placenamesSearchService",function(e,t){return{templateUrl:"placenames/categories/categories.html",link:function(n){e.getCategories().then(function(e){return n.categories=e}),n.change=function(){t.filtered()}}}}]).directive("placenamesCategoryChildren",[function(){return{templateUrl:"placenames/categories/features.html",scope:{features:"="}}}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),SolrTransformer=function(){function e(t){var n=this;if(_classCallCheck(this,e),t){var r={},a=null;t.forEach(function(e,t){t%2?r[a]=e:a=e}),this.data=r,this.dx=(r.maxX-r.minX)/r.columns,this.dy=(r.maxY-r.minY)/r.rows,this.cells=[],r.counts_ints2D.forEach(function(e,t){e&&e.forEach(function(e,r){if(e){var a={type:"Feature",properties:{count:e},geometry:{type:"Point",coordinates:[]}},i=(a.properties,a.geometry);i.coordinates[0]=n.data.minX+n.dx*(r+.5),i.coordinates[1]=n.data.maxY-n.dy*(t+.5),n.cells.push(a)}})})}}return _createClass(e,[{key:"getGeoJson",value:function(){return{type:"FeatureCollection",features:this.cells}}}]),e}();angular.module("placenames.clusters",[]).directive("placenamesClusters",["placenamesClusterService",function(e){return{link:function(){e.init()}}}]).factory("placenamesClusterService",["$http","$rootScope","configService","mapService",function(e,t,n,r){var a={showClusters:!0,sequence:0,layer:null};return a.init=function(){var e=this;n.getConfig("clusters").then(function(n){r.getMap().then(function(a){function i(e,t){o.showClusters&&o._refreshClusters(t)}console.log("Now we have the map",a),e.map=a,e.config=n,console.log(r.getGroup("clusters"));var o=e;t.$on("pn.search.complete",i)})})},a._refreshClusters=function(t){var n=this,r=t.response.numFound;if(this.layer&&this.map.removeLayer(this.layer),r>2e3){this.layer=L.markerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,singleMarkerMode:!0});var a=t.facet_counts.facet_heatmaps[this.config.countField],i=new SolrTransformer(a),o=i.getGeoJson();d3.max(o.features,function(e){return e.properties.count});i.cells.forEach(function(e){for(var t=e.properties.count,r=e.geometry.coordinates[1],a=e.geometry.coordinates[0],i=0;i<t;i++)n.layer.addLayer(L.marker([r,a]))})}else{this.layer=L.markerClusterGroup({disableClusteringAtZoom:r>600?12:4});var s=Object.assign({},t.responseHeader.params);s.rows=r;var c="select?fl=location,name&"+Object.keys(s).filter(function(e){return 0!==e.indexOf("facet")}).map(function(e){return e+"="+s[e]}).join("&");e.get(c).then(function(e){var t=e.data.response.docs;t.forEach(function(e){var t=e.location.split(" ");e.title=e.name,n.layer.addLayer(L.marker([+t[1],+t[0]],e))})})}this.layer.addTo(this.map)},a}]),angular.module("placenames.contributors",[]).directive("placenamesContributors",["$interval","contributorsService",function(e,t){return{templateUrl:"placenames/contributors/contributors.html",scope:{},link:function(n,r){var a=void 0;n.contributors=t.getState(),n.over=function(){e.cancel(a),n.contributors.ingroup=!0},n.out=function(){a=e(function(){n.contributors.ingroup=!1},1e3)},n.unstick=function(){n.contributors.ingroup=n.contributors.show=n.contributors.stick=!1,r.find("a").blur()}}}}]).directive("placenamesContributorsLink",["$interval","contributorsService",function(e,t){return{restrict:"AE",templateUrl:"placenames/contributors/show.html",scope:{},link:function(n){var r=void 0;n.contributors=t.getState(),n.over=function(){e.cancel(r),n.contributors.show=!0},n.toggleStick=function(){n.contributors.stick=!n.contributors.stick,n.contributors.stick||(n.contributors.show=n.contributors.ingroup=!1)},n.out=function(){r=e(function(){n.contributors.show=!1},700)}}}}]).factory("contributorsService",ContributorsService).filter("activeContributors",function(){return function(e){return e?e.filter(function(e){return e.enabled}):[]}}),ContributorsService.$inject=["$http"],angular.module("placenames.download",[]).directive("placenamesDownload",["flashService","messageService","placenamesDownloadService",function(e,t,n){return{templateUrl:"placenames/download/download.html",scope:{data:"="},link:function(r){function a(e){r.processing.filename&&r.processing.filename.length>16&&(r.processing.filename=r.processing.filename.substr(0,16)),r.processing.validFilename=!r.processing.filename||r.processing.filename.match(/^[a-zA-Z0-9\_\-]+$/)}r.processing=n.data,r.$watch("processing.filename",a),r.submit=function(){var a=e.add("Submitting your job for processing",null,!0);r.processing.outFormat.restrictCoordSys&&(r.processing.outCoordSys=r.processing.config.outCoordSys.find(function(e){return e.code===r.processing.outFormat.restrictCoordSys}),t.warn(r.processing.outFormat.restrictMessage)),n.submit(r.data.params).then(function(e){var n=e.data;a.remove(),"success"===n.serviceResponse.statusInfo.status?t.success("Your job has successfuly been queued for processing."):t.warn("The request has failed. Please try again later and if problems persist please contact us")})["catch"](function(){a.remove(),t.warn("The request has failed. Please try again later and if problems persist please contact us")})},a()}}}]).factory("placenamesDownloadService",["$http","configService","storageService",function(e,t,n){var r="download_email",a={data:{show:!1,email:null,validFilename:!1,get valid(){return 100===this.percentComplete},get validEmail(){return this.email},get validProjection(){return this.outCoordSys},get validFormat(){return this.outFormat},get percentComplete(){return(this.validEmail?25:0)+(this.validFilename?25:0)+(this.validProjection?25:0)+(this.validFormat?25:0)}},submit:function(t){var n=t.fq,r=t.q,a={file_name:this.data.filename?this.data.filename:"output_filename",file_format_vector:this.data.outFormat.code,coord_sys:this.data.outCoordSys.code,email_address:this.data.email,params:{q:r,fq:n}};return this.setEmail(this.data.email),this.data.fileName&&(a.file_name=this.data.fileName),e({url:this.data.config.serviceUrl,method:"POST",headers:{"Content-Type":"application/json"},data:a})},setEmail:function(e){n.setItem(r,e)},getEmail:function(){return n.getItem(r).then(function(e){return a.data.email=e,e})}};return t.getConfig("download").then(function(e){return a.data.config=e}),a.getEmail().then(function(e){return a.data.email=e}),a}]).filter("productIntersect",function(){return function(e,t){return t&&e?e.filter(function(e){if(!e.extent)return!0;var n=e.extent,r=n.xMax,a=n.xMin,i=n.yMax,o=n.yMin;return t.intersects([[o,a],[i,r]])}):e}});var ExtentService=function t(e,n){function r(){e.getMap().then(function(e){e.on("moveend",a),e.on("zoomend",a),a()})}function a(){e.getMap().then(function(e){var t=e.getBounds();i.yMin=t.getSouth(),i.xMin=t.getWest(),i.yMax=t.getNorth(),i.xMax=t.getEast(),n.refresh()})}_classCallCheck(this,t);var i=n.getSearchCriteria().bbox;return i.fromMap&&r(),{getParameters:function(){return i}}};ExtentService.$inject=["mapService","searchService"],angular.module("placenames.extent",["explorer.switch"]).directive("placenamesExtent",["extentService",function(e){return{restrict:"AE",templateUrl:"placenames/extent/extent.html",controller:["$scope",function(t){t.parameters=e.getParameters()}],link:function(e,t,n){}}}]).factory("extentService",ExtentService);var options={cache:!0},feature=null,authorities=[],groups=[],categories=[],featureCodes=[];angular.module("placenames.filters",["placenames.groups"]).directive("placenamesFilters",[function(){return{templateUrl:"placenames/filters/filters.html",scope:{status:"=",state:"="},link:function(e){e.$watch("status.groupOpen",function(t){e.status})}}}]),angular.module("placenames.feature",[]).directive("placenamesFeatures",["groupsService","placenamesSearchService",function(e,t){return{templateUrl:"placenames/features/features.html",link:function(n){e.getFeatures().then(function(e){return n.features=e}),n.change=function(){t.filtered()}}}}]);var createCategories=function(e){e.categories=Object.keys(e.groups)};angular.module("placenames.groups",["placenames.feature","placenames.categories"]).directive("placenamesGroups",["groupsService","placenamesSearchService",function(e,t){return{templateUrl:"placenames/groups/groups.html",link:function(n){e.getGroups().then(function(e){n.data=e}),n.change=function(){console.log("Update groups"),t.filtered()}}}}]).directive("placenamesGroupChildren",["groupsService",function(e){return{templateUrl:"placenames/groups/category.html",scope:{category:"="}}}]).factory("groupsService",["$http","$q","$rootScope","configService","mapService",function(e,t,n,r,a){var i={};return i.getGroups=function(){return i.config?(i.promise=null,t.when(i.config)):i.promise?i.promise:(i.promise=i.getCounts().then(function(t){return r.getConfig().then(function(n){var r=n.groups;return i.config=r,e.get(r.referenceDataLocation).then(function(e){var a=e.data;return r.data=a,r.categories=[],r.features=[],r.authorities=n.authorities,r.authorities.forEach(function(e){var n=t.authority[e.code];e.total=n?n:0}),r.groups=Object.keys(a).filter(function(e){return!("name"===e||"definition"===e)}).map(function(e){var n,i={name:e,total:t.group[e]?t.group[e]:0,definition:a[e].definition,categories:Object.keys(a[e]).filter(function(e){return!("name"===e||"definition"===e)}).map(function(n){return{name:n,total:t.category[n]?t.category[n]:0,definition:a[e][n].definition,parent:a[e],features:a[e][n].features}})};return(n=r.categories).push.apply(n,_toConsumableArray(i.categories)),i.categories.forEach(function(e){var n;(n=r.features).push.apply(n,_toConsumableArray(e.features.map(function(n){return n.parent=e,n.total=t.feature[n.name]?t.feature[n.name]:0,n})))}),i}),r.authorities=r.authorities.filter(function(e){return e.total}),r.groups=r.groups.filter(function(e){return e.total}),r.categories=r.categories.filter(function(e){return e.total}),r.features=r.features.filter(function(e){return e.total}),console.log(r),r})})}),i.promise)},i.getCategories=function(){return i.getGroups().then(function(){return i.config.categories})},i.getAll=function(){return i.getGroups().then(function(){return i.config})},i.getAuthorities=function(){return i.getGroups().then(function(){return i.config.authorities})},i.getFeatures=function(){return i.getGroups().then(function(){return i.config.features})},i.getCounts=function(){return r.getConfig("groups").then(function(t){var n=t.referenceDataCountsUrl;return e.get(n).then(function(e){var t=e.data,n=t.facet_counts.facet_fields,r={feature:{},category:{},group:{},authority:{}},a=void 0;return["feature","category","group","authority"].forEach(function(e){n[e].forEach(function(t,n){n%2?r[e][a]=t:a=t})}),r})})},i}]),function(e){e.module("placenames.header",[]).controller("headerController",["$scope","$q","$timeout",function(e,t,n){var r=function(e){return e};e.$on("headerUpdated",function(t,n){e.headerConfig=r(n)})}]).directive("placenamesHeader",[function(){var t={current:"none",heading:"ICSM",headingtitle:"ICSM",helpurl:"help.html",helptitle:"Get help about ICSM",helpalttext:"Get help about ICSM",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"placenames/header/header.html",scope:{current:"=",breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(n,r,a){e.copy(t);e.forEach(t,function(e,t){t in n||(n[t]=e)})}}}]).factory("headerService",["$http",function(){}])}(angular);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),MapsCtrl=function(){function e(t){_classCallCheck(this,e),this.mapService=mapService}return _createClass(e,[{key:"toggleLayer",value:function(e){this.mapsService.toggleShow(e)}}]),e}();MapsCtrl.$inject=["mapsService"];var MapsService=function(){function e(t,n){_classCallCheck(this,e),this.CONFIG_KEY="layersTab",this.configService=t,this.mapService=n,this.configService=t}return _createClass(e,[{key:"getConfig",value:function(){return this.configService.getConfig(this.CONFIG_KEY)}},{key:"toggleShow",value:function(e,t){var n=this;this.configService.getConfig(this.CONFIG_KEY).then(function(t){e.layer?(e.displayed=!1,n.mapService.removeFromGroup(e,t.group)):(n.mapService.addToGroup(e,t.group),e.displayed=!0)})}}]),e}();MapsService.$inject=["configService","mapService"],angular.module("placenames.maps",["explorer.layer.slider"]).directive("placenamesMaps",["mapsService",function(e){return{templateUrl:"placenames/maps/maps.html",link:function(t){e.getConfig().then(function(e){t.layersTab=e})}}}]).controller("MapsCtrl",MapsCtrl).service("mapsService",MapsService),angular.module("placenames.altthemes",["placenames.storage"]).directive("altThemes",["altthemesService",function(e){return{restrict:"AE",templateUrl:"placenames/navigation/altthemes.html",scope:{current:"="},link:function(t){e.getThemes().then(function(e){t.themes=e}),e.getCurrentTheme().then(function(e){t.theme=e}),t.changeTheme=function(n){t.theme=n,e.setTheme(n.key)}}}}]).controller("altthemesCtrl",["altthemesService",function(e){this.service=e}]).filter("altthemesFilter",function(){return function(e,t){var n=[];return t?(e&&e.forEach(function(e){e.themes&&e.themes.some(function(e){return e===t.key})&&n.push(e)}),n):e}}).factory("altthemesService",["$q","$http","storageService",function(e,t,n){var r="placenames.current.theme",a="placenames/resources/config/themes.json",i="All",o=[],s=this;return this.themes=[],this.theme=null,n.getItem(r).then(function(e){e||(e=i),t.get(a,{cache:!0}).then(function(t){var n=t.data.themes;s.themes=n,s.theme=n[e],angular.forEach(n,function(e,t){e.key=t}),o.forEach(function(e){e.resolve(s.theme)})})}),this.getCurrentTheme=function(){if(this.theme)return e.when(s.theme);var t=e.defer();return o.push(t),t.promise},this.getThemes=function(){return t.get(a,{cache:!0}).then(function(e){return e.data.themes})},this.setTheme=function(e){this.theme=this.themes[e],n.setItem(r,e)},this}]).filter("altthemesEnabled",function(){return function(e){return e?e.filter(function(e){return!!e.enabled}):e}}).filter("altthemesMatchCurrent",function(){return function(e,t){return e?e.filter(function(e){return!!e.keys.find(function(e){return e===t})}):e}}),angular.module("placenames.navigation",["placenames.altthemes"]).directive("placenamesNavigation",[function(){return{restrict:"AE",template:"<alt-themes current='current'></alt-themes>",scope:{current:"=?"},link:function(e){e.username="Anonymous",e.current||(e.current="none")}}}]).factory("navigationService",[function(){return{}}]),angular.module("placenames.panes",[]).directive("placenamesPanes",["$rootScope","$timeout","mapService",function(e,t,n){return{templateUrl:"placenames/panes/panes.html",scope:{defaultItem:"@",data:"="},controller:["$scope",function(r){var a=!1;r.view=r.defaultItem,e.$on("side.panel.change",function(e){function n(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!1,!0),window.dispatchEvent(e)}n(),t(n,100),t(n,200),t(n,300),t(n,500)}),r.setView=function(t){var i=r.view,o=0;r.view===t?(t&&(a=!0,o=1e3),r.view=""):(t||(a=!0),r.view=t),e.$broadcast("view.changed",r.view,i),a&&n.getMap().then(function(e){e._onResize()})},t(function(){e.$broadcast("view.changed",r.view,null)},50)}]}}]),angular.module("placenames.plot",[]).directive("placenamesPlot",["$log",function(e){return{restrict:"AE",scope:{line:"="},link:function(t,n,r,a){t.$watch("line",function(t,n){e.info(t)})}}}]),angular.module("placenames.popover",[]).directive("placenamesPopover",[function(){return{templateUrl:"placenames/popover/popover.html",restrict:"A",transclude:!0,scope:{closeOnEscape:"@",show:"=",containerClass:"=",direction:"@"},link:function(e,t){function n(t){27===t.which&&(t.stopPropagation(),t.preventDefault(),e.$apply(function(){e.show=!1}))}e.direction||(e.direction="bottom"),!e.closeOnEscape||e.closeOnEscape!==!0&&"true"!==e.closeOnEscape||t.on("keyup",n)}}}]),angular.module("placenames.proxy",[]).provider("proxy",function(){this.$get=["$http","$q",function(e,t){var n="proxy/";return this.setProxyBase=function(e){n=e},{get:function(e,t){return this._method("get",e,t)},post:function(e,t){return this._method("post",e,t)},put:function(e,t){return this._method("put",e,t)},_method:function(t,r,a){return e[t](n+r,a).then(function(e){return e.data})}}}]}),angular.module("placenames.quicksearch",[]).directive("placenamesQuicksearch",[function(){return{link:function(e){},templateUrl:"placenames/quicksearch/quicksearch.html"}}]).directive("placenamesFilteredSummary",["groupsService",function(e){return{scope:{state:"="},templateUrl:"placenames/quicksearch/filteredsummary.html",link:function(t){t.filters=e.getAll().then(function(e){return t.filters=e})}}}]),angular.module("placenames.reset",[]).directive("resetPage",function(e){return{restrict:"AE",scope:{},templateUrl:"placenames/reset/reset.html",controller:["$scope",function(t){t.reset=function(){e.location.reload()}}]}}),function(e){e.module("placenames.results.item",[]).directive("placenamesResultsItem",["placenamesItemService","placenamesResultsService","placenamesSearchService",function(e,t,n){return{templateUrl:"placenames/results/item.html",bindToController:{item:"="},controller:function(){console.log("Creating an item scope"),this.showPan=function(e){t.showPan(e)},this.download=function(t){e[t](this)},this.leave=function(){n.hide()},this.enter=function(){n.show(this.item)},this.$destroy=function(){n.hide()}},controllerAs:"vm"}}]).factory("placenamesItemService",["$http","configService",function(e,t){var n={wfs:function(n){t.getConfig("results").then(function(t){var r=t.wfsTemplate;e.get(r.replace("${id}",n.item.recordId)).then(function(e){var t=new Blob([e.data],{type:"application/json;charset=utf-8"});saveAs(t,"gazetteer-wfs-feature-"+n.item.recordId+".xml")})})}};return n}]).filter("itemLongitude",function(){return function(e){return e.split(" ")[0]}}).filter("itemLatitude",function(){return function(e){return e.split(" ")[1]}})}(angular),angular.module("placenames.results",["placenames.results.item","placenames.scroll","placenames.download"]).directive("placenamesResultsSummary",[function(){return{templateUrl:"placenames/results/summary.html",scope:{state:"="}}}]).directive("placenamesResultsDownload",[function(){return{template:"<placenames-download data='data'></placenames-download>",scope:{data:"="}}}]).directive("placenamesResults",["placenamesResultsService",function(e){return{templateUrl:"placenames/results/results.html",restrict:"AE",bindToController:{data:"="},controller:function(){this.clear=function(e){this.data.searched=null},this.more=function(){e.moreDocs(this.data.persist)},this.clear=function(){e.clear(this.data)},this.download=function(){e.download(this.data.persist.data.response.docs.map(function(e){return e.id}))}},controllerAs:"pr",link:function(t){t.$destroy=function(){e.hide()},e.moreDocs(t.pr.data.persist)}};
}]).factory("placenamesResultsService",ResultsService).filter("formatDate",function(){return function(e){if(!e)return e;var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}}).filter("resultsHasSomeData",function(){return function(e){return e.some(function(e){return e})}}),ResultsService.$inject=["proxy","$http","$rootScope","$timeout","configService","mapService","placenamesSearchService"],angular.module("placenames.scroll",[]).directive("commonScroller",["$timeout",function(e){return{scope:{more:"&",buffer:"=?"},link:function(t,n,r){var a;t.buffer||(t.buffer=100),n.on("scroll",function(n){function r(){t.more&&i.scrollHeight-i.scrollTop<=i.clientHeight+t.buffer&&t.more()}var i=n.currentTarget;e.cancel(a),a=e(r,120)})}}}]);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("placenames.search",["placenames.filters","placenames.authorities"]).directive("placenamesClear",["placenamesSearchService",function(e){return{link:function(t,n){function r(){if(n.is(":focus")){var e=$.Event("keydown");e.which=27,n.trigger(e),n.blur()}}e.onMapUpdate(r)}}}]).directive("placenamesSearchFilters",["groupsService","placenamesSearchService",function(e,t){var n={group:"groups",category:"categories",feature:"features"};return{templateUrl:"placenames/search/searchfilters.html",link:function(r){r.data=t.data,e.getAll().then(function(e){if(r.data.filterBy){var t=n[r.data.filterBy];r.filters=e[t].filter(function(e){return e.selected}).map(function(e){return e.name}).join(", "),r.filters.length&&(r.type=t)}r.authorities=e.authorities.filter(function(e){return e.selected}).map(function(e){return e.code}).join(", ")})}}}]).directive("placenamesOptions",["placenamesSearchService",function(e){return{link:function(t){t.leave=function(){e.hide()},t.enter=function(){e.show(t.match.model)},t.$destroy=function(){e.hide()}}}}]).directive("placenamesQuickSearch",["$rootScope","$timeout","groupsService","placenamesSearchService",function(e,t,n,r){return{templateUrl:"placenames/search/quicksearch.html",restrict:"AE",link:function(n){n.state=r.data,n.loadDocs=function(){return r.filtered().then(function(e){return e.response.docs})},n.clear=function(){n.state.searched=null,t(function(){e.$broadcast("clear.button.fired")},10)},n.search=function(a){n.showFilters=!1,r.search(a),t(function(){e.$broadcast("search.button.fired")},100)}}}}]).directive("placenamesSearch",["$timeout","groupsService","placenamesSearchService",function(e,t,n){return{templateUrl:"placenames/search/search.html",restrict:"AE",link:function(e){e.state=n.data,e.status={},e.$watch("state.searched",function(e,t){!e&&t&&n.filtered()}),n.filtered(),e.update=function(){n.filtered()},e.loadOnEmpty=function(){e.state.filter||n.filtered()},e.select=function(t){e.search(t)},e.deselect=function(e){e.selected=!1,n.filtered()},e.$watch("status.groupOpen",function(t){t&&(console.log("Update filter",t),e.state.filterBy="group",n.filtered())}),e.$watch("status.catOpen",function(t){t&&(console.log("Update filter",t),e.state.filterBy="category",n.filtered())}),e.$watch("status.featureOpen",function(t){t&&(console.log("Update filter",t),e.state.filterBy="feature",n.filtered())})}}}]).filter("placenamesDocName",[function(){return function(e){return e?e.map(function(e){return e.name+" ("+e.authorityId+")"}):[]}}]).filter("placenamesSomeSelected",[function(){return function(e){return!!e&&Object.keys(e).some(function(t){return e[t].selected})}}]).filter("placenamesUnselectedFacets",[function(){return function(e){return e?e.filter(function(e){return!e.selected}):[]}}]).filter("placenamesSelectedFacets",[function(){return function(e){return e?e.filter(function(e){return e.selected}):[]}}]).filter("placenamesClean",[function(){return function(e){return e.replace(/\s?[, ]\s?/g," ")}}]).filter("placenamesTooltip",[function(){return function(e){var t="<div style='text-align:left'>";if(e.variant){var n=e.variant.split("|");n.forEach(function(e,r){t+=r?"":"Also known as",t+=(r&&r<n.length-1?",":"")+" ",r&&r===n.length-1&&(t+="or "),t+=e}),t+="<br/>"}return t+="Lat "+e.location.split(" ").reverse().join("&deg; Lng ")+"&deg;<br/>Feature type: "+e.feature+"</div>"}}]).factory("placenamesSearchService",SearchService),SearchService.$inject=["$http","$rootScope","$timeout","configService","groupsService","mapService"],angular.module("placenames.side-panel",[]).factory("panelSideFactory",["$rootScope","$timeout",function(e,t){function n(e,t){var n=e.active;return n===t?(e.active=null,e.width=0):e.active=t,!n}var r={left:{active:null,width:0},right:{active:null,width:0}};return{state:r,setLeft:function(e){var t=n(r.left,e);return t&&(r.left.width=320),t},setRight:function(t){r.right.width=t.width;var a=n(r.right,t.name);return e.$broadcast("side.panel.change",{side:"right",data:r.right,width:t.width}),a}}}]).directive("sidePanelRightOppose",["panelSideFactory",function(e){return{restrict:"E",transclude:!0,template:'<div class="contentContainer" ng-attr-style="right:{{right.width}}"><ng-transclude></ng-transclude></div>',link:function(t){t.right=e.state.right}}}]).directive("sidePanelRight",["panelSideFactory",function(e){return{restrict:"E",transclude:!0,templateUrl:"placenames/side-panel/side-panel-right.html",link:function(t){t.right=e.state.right,t.closePanel=function(){e.setRight({name:null,width:0})}}}}]).directive("panelTrigger",["panelSideFactory",function(e){return{restrict:"E",transclude:!0,templateUrl:"placenames/side-panel/trigger.html",scope:{"default":"@?",panelWidth:"@",name:"@",iconClass:"@",panelId:"@"},link:function(t){t.toggle=function(){e.setRight({width:t.panelWidth,name:t.panelId})},t["default"]&&e.setRight({width:t.panelWidth,name:t.panelId})}}}]).directive("panelOpenOnEvent",["$rootScope","panelSideFactory",function(e,t){return{restrict:"E",scope:{panelWidth:"@",eventName:"@",panelId:"@",side:"@?"},link:function(n){n.side||(n.side="right"),e.$on(n.eventName,function(e,r){var a=t.state[n.side];if(a&&!a.active){var i={width:n.panelWidth,name:n.panelId};"right"===n.side?t.setRight(i):t.setLeft(i)}})}}}]).directive("panelCloseOnEvent",["$rootScope","panelSideFactory",function(e,t){return{restrict:"E",scope:{eventName:"@",side:"@?"},link:function(n){n.side||(n.side="right"),e.$on(n.eventName,function(e,r){var a=t.state[n.side];if(a&&a.active){var i={name:null};"right"===n.side?t.setRight(i):t.setLeft(i)}})}}}]).directive("sidePanelLeft",["panelSideFactory",function(e){return{restrict:"E",transclude:!0,templateUrl:"placenames/side-panel/side-panel-left.html",link:function(t){t.left=e.state.left,t.closeLeft=function(){e.setLeft(null)}}}}]),angular.module("placenames.splash",["ui.bootstrap.modal"]).directive("placenamesSplash",["$rootScope","$uibModal","$log","splashService",function(e,t,n,r){return{controller:["$scope","splashService",function(e,t){e.acceptedTerms=!0,t.getReleaseNotes().then(function(n){e.releaseMessages=n,e.acceptedTerms=t.hasViewedSplash()})}],link:function(a,i){var o;a.$watch("acceptedTerms",function(e){e===!1&&(o=t.open({templateUrl:"placenames/splash/splash.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","acceptedTerms","messages",function(e,t,n){e.acceptedTerms=t,e.messages=n,e.accept=function(){o.close(!0)}}],resolve:{acceptedTerms:function(){return a.acceptedTerms},messages:function(){return a.releaseMessages}}}),o.result.then(function(e){n.info("Accepted terms"),a.acceptedTerms=e,r.setHasViewedSplash(e)},function(){n.info("Modal dismissed at: "+new Date)}))}),e.$on("logoutRequest",function(){userService.setAcceptedTerms(!1)})}}}]).factory("splashService",["$http",function(e){function t(e){e?sessionStorage.setItem(r,!0):sessionStorage.removeItem(r)}function n(){return!!sessionStorage.getItem(r)}var r="placenames.accepted.terms",a="placenames/resources/config/releasenotes.json";return{getReleaseNotes:function(){return e({method:"GET",url:a+"?t="+Date.now()}).then(function(e){return e.data})},hasViewedSplash:n,setHasViewedSplash:t}}]).filter("priorityColor",[function(){var e={IMPORTANT:"red",HIGH:"blue",MEDIUM:"orange",LOW:"gray"};return function(t){return t in e?e[t]:"black"}}]).filter("wordLowerCamel",function(){return function(e){return e.charAt(0)+e.substr(1).toLowerCase()}}).filter("sortNotes",[function(){return function(e){if(e){var t=e.slice(0).sort(function(e,t){return e.priority==t.priority?e.lastUpdate==t.lastUpdate?0:t.lastUpdate-e.lastUpdate:"IMPORTANT"==e.priority?-11:1});return t}}}]),angular.module("placenames.storage",[]).factory("storageService",["$log","$q",function(e,t){var n="elvis.placenames";return{setGlobalItem:function(e,t){this._setItem("_system",e,t)},setItem:function(e,t){this._setItem(n,e,t)},_setItem:function(t,n,r){e.debug("Fetching state for key locally"+n),localStorage.setItem(t+"."+n,JSON.stringify(r))},getGlobalItem:function(e){return this._getItem("_system",e)},getItem:function(e){var r=t.defer();return this._getItem(n,e).then(function(e){r.resolve(e)}),r.promise},_getItem:function(n,r){e.debug("Fetching state locally for key "+r);var a=localStorage.getItem(n+"."+r);if(a)try{a=JSON.parse(a)}catch(i){}return t.when(a)}}}]),angular.module("placenames.themes",[]).directive("placenamesThemes",["placenamesService",function(e){return{restrict:"AE",templateUrl:"placenames/themes/themes.html",link:function(t){e.getThemes().then(function(e){t.themes=e}),e.getCurrentTheme().then(function(e){t.theme=e}),t.changeTheme=function(n){t.theme=n,e.setTheme(n.key)}}}}]).controller("themesCtrl",["themesService",function(e){this.service=e}]).filter("themesFilter",function(){return function(e,t){var n=[];return t?(e&&e.forEach(function(e){e.themes&&e.themes.some(function(e){return e==t.key})&&n.push(e)}),n):e}}).factory("themesService",["$q","configService","storageService",function(e,t,n){var r="placenames.current.theme",a="All",i=[],o=this;return this.themes=[],this.theme=null,n.getItem(r).then(function(e){e||(e=a),t.getConfig("themes").then(function(t){o.themes=t,o.theme=t[e],angular.forEach(t,function(e,t){e.key=t}),i.forEach(function(e){e.resolve(o.theme)})})}),this.getCurrentTheme=function(){if(this.theme)return e.when(o.theme);var t=e.defer();return i.push(t),t.promise},this.getThemes=function(){return t.getConfig("themes")},this.setTheme=function(e){this.theme=this.themes[e],n.setItem(r,e)},this}]),angular.module("placenames.toolbar",[]).directive("placenamesToolbar",[function(){return{templateUrl:"placenames/toolbar/toolbar.html",controller:"toolbarLinksCtrl",transclude:!0}}]).controller("toolbarLinksCtrl",["$scope","configService",function(e,t){var n=this;t.getConfig().then(function(e){n.links=e.toolbarLinks}),e.item="",e.toggleItem=function(t){e.item=e.item===t?"":t}}]),angular.module("placenames.restrict.pan",[]).directive("restrictPan",["mapService",function(e){return{restrict:"AE",scope:{bounds:"="},link:function(t){e.getMap().then(function(e){var n=t.bounds,r=n[0],a=n[1],i=L.latLng(r[0],r[1]),o=L.latLng(a[0],a[1]),s=L.latLngBounds(i,o);e.setMaxBounds(s),e.on("drag",function(){e.panInsideBounds(s,{animate:!1})})})}}}]),angular.module("placenames.utils",[]).filter("placenamesSplitBar",function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return e.split("|").forEach(function(e,n,r){t+=(n&&n<r.length-1?",":"")+" ",n&&n===r.length-1&&(t+="or "),t+=e}),t}}).filter("placenamesGoogleLink",function(){var e="https://www.google.com/maps/search/?api=1&query=${lat},${lng}";return function(t){if(!t)return"";var n=t.location.split(" ");return e.replace("${name}",t.name).replace("${lng}",n[0]).replace("${lat}",n[1])}}).factory("placenamesUtilsService",["configService",function(e){var t={};return t}]),angular.module("placenames.templates",[]).run(["$templateCache",function(e){e.put("placenames/about/about.html",'<span class="about" ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-class="(about.show || about.ingroup || about.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated about-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div class="aboutHeading">About Place Names</div>\r\n   <div ng-repeat="item in about.items">\r\n      <a ng-href="{{item.link}}" name="about{{$index}}" title="{{item.heading}}" target="_blank">\r\n         {{item.heading}}\r\n      </a>\r\n   </div>\r\n</span>'),e.put("placenames/about/button.html",'<button ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-click="toggleStick()" tooltip-placement="left" uib-tooltip="About Place Names"\r\n      class="btn btn-primary btn-default">About</button>'),e.put("placenames/authorities/authorities.html",'<div ng-repeat="item in authorities">\r\n   <div class="col-md-12 ellipsis" title=\'Jurisdiction: {{item.jurisdiction}}, Authority name: {{item.name}}\'>\r\n      <input type="checkbox" ng-click="update()" ng-model="item.selected" ng-change="change()">\r\n      <span>\r\n         <a target="_blank" href="http://www.google.com/search?q={{item.name}}">{{item.code}}</a>\r\n         ({{(item.count | number) + (item.count || item.count == 0?\' of \':\'\')}}{{item.total | number}})\r\n      </span>\r\n   </div>\r\n</div>'),e.put("placenames/categories/categories.html",'<div>\r\n   <div ng-repeat="category in categories | orderBy: \'name\'" ng-attr-title="{{category.definition}}">\r\n      <input type="checkbox" ng-model="category.selected" ng-change="change()">\r\n      <span title="[Group: {{category.parent.name}}], {{category.definition}}">{{category.name}} ({{category.total}})</span>\r\n      <button class="undecorated" ng-click="category.showChildren = !category.showChildren">\r\n         <i class="fa fa-lg" ng-class="{\'fa-question-circle-o\':!category.showChildren, \'fa-minus-square-o\': category.showChildren}"></i>\r\n      </button>\r\n      <div ng-show="category.showChildren" style="padding-left: 8px; border-bottom: solid 1px lightgray">\r\n         <div>[Group: {{category.parent.name}}]\r\n         <div ng-if="category.definition">{{category.definition}}</div>\r\n         It includes the following feature types:\r\n         <placenames-category-children features="category.features"></placenames-category-children>\r\n      </div>\r\n   </div>\r\n</div>'),e.put("placenames/categories/features.html",'<div>\n   <div ng-repeat="feature in features" style="padding-left:10px" title="{{feature.definition}}">\n      - {{feature.name}} ({{feature.total}})\n   </div>\n</div>'),e.put("placenames/contributors/contributors.html",'<span class="contributors" ng-mouseenter="over()" ng-mouseleave="out()" style="z-index:1500"\r\n      ng-class="(contributors.show || contributors.ingroup || contributors.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated contributors-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div ng-repeat="contributor in contributors.orgs | activeContributors" style="text-align:cnter">\r\n      <a ng-href="{{contributor.href}}" name="contributors{{$index}}" title="{{contributor.title}}" target="_blank">\r\n         <img ng-src="{{contributor.image}}" alt="{{contributor.title}}" class="elvis-logo" ng-class="contributor.class"></img>\r\n      </a>\r\n   </div>\r\n</span>'),e.put("placenames/contributors/show.html",'<a ng-mouseenter="over()" ng-mouseleave="out()" class="contributors-link" title="Click to lock/unlock contributors list."\r\n      ng-click="toggleStick()" href="#contributors0">Contributors</a>'),e.put("placenames/download/download.html",'<div class="container-fluid">\r\n   <div class="row">\r\n      <div class="col-md-4">\r\n         <label for="geoprocessOutCoordSys">\r\n            Coordinate System\r\n         </label>\r\n      </div>\r\n      <div class="col-md-8">\r\n         <select style="width:95%" ng-model="processing.outCoordSys" ng-options="opt.value for opt in processing.config.outCoordSys | productIntersect : data.bounds"></select>\r\n      </div>\r\n   </div>\r\n\r\n   <div class="row">\r\n      <div class="col-md-4">\r\n         <label for="geoprocessOutputFormat">\r\n            Output Format\r\n         </label>\r\n      </div>\r\n      <div class="col-md-8">\r\n         <select style="width:95%" ng-model="processing.outFormat" ng-options="opt.value for opt in processing.config.outFormat"></select>\r\n      </div>\r\n   </div>\r\n\r\n   <div class="row">\r\n      <div class="col-md-4">\r\n         <label for="geoprocessOutputFormat">\r\n            File name\r\n         </label>\r\n      </div>\r\n      <div class="col-md-8">\r\n         <input type="text" ng-model="processing.filename" class="download-control" placeholder="Optional filename" title="Alphanumeric, hyphen or dash characters, maximium of 16 characters">\r\n      </div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">\r\n         <label for="geoprocessOutputFormat">\r\n            Email\r\n         </label>\r\n      </div>\r\n      <div class="col-md-8">\r\n         <input required="required" type="email" ng-model="processing.email" class="download-control" placeholder="Email address to send download link">\r\n      </div>\r\n   </div>\r\n\r\n   <div class="row">\r\n      <div class="col-md-5" style="padding-top:7px">\r\n         <div class="progress">\r\n            <div class="progress-bar" role="progressbar" aria-valuenow="{{processing.percentComplete}}" aria-valuemin="0" aria-valuemax="100"\r\n               style="width: {{processing.percentComplete}}%;">\r\n               <span class="sr-only"></span>\r\n            </div>\r\n         </div>\r\n      </div>\r\n      <div class="col-md-5" style="padding-top:7px">\r\n         <span style="padding-right:10px" uib-tooltip="Select a valid coordinate system for area." tooltip-placement="bottom">\r\n            <i class="fa fa-file-video-o fa-2x" ng-class="{\'product-valid\': processing.validProjection, \'product-invalid\': !processing.validProjection}"></i>\r\n         </span>\r\n         <span style="padding-right:10px" uib-tooltip="Select a valid download format." tooltip-placement="bottom">\r\n            <i class="fa fa-files-o fa-2x" ng-class="{\'product-valid\': processing.validFormat, \'product-invalid\': !processing.validFormat}"></i>\r\n         </span>\r\n         <span style="padding-right:10px" uib-tooltip="Optional custom filename (alphanumeric, max length 8 characters)" tooltip-placement="bottom">\r\n            <i class="fa fa-save fa-2x" ng-class="{\'product-valid\': processing.validFilename, \'product-invalid\': !processing.validFilename}"></i>\r\n         </span>\r\n         <span style="padding-right:10px" uib-tooltip="Provide an email address." tooltip-placement="bottom">\r\n            <i class="fa fa-envelope fa-2x" ng-class="{\'product-valid\': processing.validEmail, \'product-invalid\': !processing.validEmail}"></i>\r\n         </span>\r\n      </div>\r\n      <div class="col-md-2">\r\n         <button class="btn btn-primary pull-right" ng-disabled="!processing.valid" ng-click="submit()">Submit</button>\r\n      </div>\r\n   </div>\r\n</div>'),e.put("placenames/extent/extent.html",'<div class="row" style="border-top: 1px solid gray; padding-top:5px">\r\n\t<div class="col-md-5">\r\n\t\t<div class="form-inline">\r\n\t\t\t<label>\r\n\t\t\t\t<input id="extentEnable" type="checkbox" ng-model="parameters.fromMap" ng-click="change()"></input> \r\n\t\t\t\tRestrict area to map\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\t \r\n\t<div class="col-md-7" ng-show="parameters.fromMap">\r\n\t\t<div class="container-fluid">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Max:</strong> \r\n\t\t\t\t\t<span>{{parameters.yMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Max:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.yMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),e.put("placenames/filters/filters.html",'<uib-accordion>\r\n   <div uib-accordion-group class="panel-default" is-open="status.groupOpen">\r\n      <uib-accordion-heading>\r\n         Filter by group...\r\n         <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.groupOpen, \'glyphicon-chevron-right\': !status.groupOpen}"></i>\r\n      </uib-accordion-heading>\r\n      <div style="max-height: 300px; overflow-y: auto">\r\n         <placenames-groups update="update()" ng-show="status.groupOpen"></placenames-groups>\r\n      </div>\r\n   </div>\r\n   <div uib-accordion-group class="panel-default" is-open="status.catOpen">\r\n      <uib-accordion-heading>\r\n         Filter by category...\r\n         <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.catOpen, \'glyphicon-chevron-right\': !status.catOpen}"></i>\r\n      </uib-accordion-heading>\r\n      <div style="max-height: 300px; overflow-y: auto">\r\n         <placenames-categories update="update()" ng-show="status.catOpen"></placenames-categories>\r\n      </div>\r\n   </div>\r\n   <div uib-accordion-group class="panel-default" is-open="status.featureOpen">\r\n      <uib-accordion-heading>\r\n         Filter by feature...\r\n         <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.featureOpen, \'glyphicon-chevron-right\': !status.featureOopen}"></i>\r\n      </uib-accordion-heading>\r\n      <div style="max-height: 300px; overflow-y: auto">\r\n         <placenames-features update="update()" ng-show="status.featureOpen"></placenames-features>\r\n      </div>\r\n   </div>\r\n</uib-accordion>\r\n<uib-accordion close-others="oneAtATime">\r\n   <div uib-accordion-group class="panel-default" is-open="status.authOpen">\r\n      <uib-accordion-heading>\r\n         Filter by authority...\r\n         <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.authOpen, \'glyphicon-chevron-right\': !status.authOpen}"></i>\r\n      </uib-accordion-heading>\r\n      <div style="max-height: 300px; overflow-y: auto">\r\n         <placenames-authorities update="update()" ng-show="status.authOpen"></placenames-authorities>\r\n      </div>\r\n   </div>\r\n</uib-accordion>'),e.put("placenames/features/features.html",'<div>\r\n      <div ng-repeat="feature in features | orderBy: \'name\'" title="{{feature.definition}}">\r\n         <input type="checkbox" ng-model="feature.selected" ng-change="change()">\r\n         <span title="[Group/category: {{feature.parent.parent.name}}/{{feature.parent.name}}], {{feature.definition}}">{{feature.name}} ({{feature.total}})</span>\r\n         <button class="undecorated" ng-click="feature.showChildren = !feature.showChildren">\r\n            <i class="fa fa-lg" ng-class="{\'fa-question-circle-o\':!feature.showChildren, \'fa-minus-square-o\': feature.showChildren}"></i>\r\n         </button>\r\n         <div ng-show="feature.showChildren" style="padding-left: 8px; border-bottom: solid 1px lightgray">\r\n            <div ng-if="feature.definition">{{feature.definition}}</div>\r\n            [Group/Category: {{feature.parent.parent.name}}/{{feature.parent.name}}]\r\n         </div>\r\n      </div>\r\n   </div>'),e.put("placenames/groups/category.html",'\r\n<div style="padding-left:10px">\r\n   - <span ng-attr-title="{{category.definition}}">{{category.name}}</span>\r\n   <div ng-repeat="feature in category.features | orderBy:\'name\'" style="padding-left:10px">\r\n      - <span ng-attr-title="{{feature.definition}}">{{feature.name}}</span>\r\n   </div>\r\n</div>\r\n'),e.put("placenames/groups/groups.html",'<div>\r\n   <div ng-repeat="group in data.groups">\r\n      <input type="checkbox" ng-model="group.selected" ng-change="change()"><span title="{{group.definition}}">{{group.name}} ({{group.total | number}})\r\n      <button class="undecorated" ng-click="group.showChildren = !group.showChildren">\r\n         <i class="fa fa-lg" ng-class="{\'fa-question-circle-o\':!group.showChildren, \'fa-minus-square-o\': group.showChildren}"></i>\r\n      </button>\r\n      <div ng-show="group.showChildren" style="padding-left:8px">\r\n         {{group.definition}}<br/><br/>\r\n         This group is made up of the following categories and feature types:\r\n         <div ng-repeat="category in group.categories" style="padding-left:8px">\r\n            <placenames-group-children category="category"></placenames-group-children>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),e.put("placenames/header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n   <div class="navbar-header">\r\n\r\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n         <span class="sr-only">Toggle navigation</span>\r\n         <span class="icon-bar"></span>\r\n         <span class="icon-bar"></span>\r\n         <span class="icon-bar"></span>\r\n      </button>\r\n\r\n      <a href="/" class="appTitle visible-xs">\r\n         <h1 style="font-size:120%">{{heading}}</h1>\r\n      </a>\r\n   </div>\r\n   <div class="navbar-collapse collapse ga-header-collapse">\r\n      <ul class="nav navbar-nav">\r\n         <li class="hidden-xs">\r\n            <a href="/">\r\n               <h1 class="applicationTitle">{{heading}}</h1>\r\n            </a>\r\n         </li>\r\n      </ul>\r\n      <ul class="nav navbar-nav navbar-right nav-icons">\r\n         <li role="menuitem" style="padding-right:10px;position: relative;top: -3px;">\r\n            <span class="altthemes-container">\r\n               <span>\r\n                  <a title="Location INformation Knowledge platform (LINK)" href="http://fsdf.org.au/" target="_blank">\r\n                     <img alt="FSDF" src="placenames/resources/img/FSDFimagev4.0.png" style="height: 66px">\r\n                  </a>\r\n               </span>\r\n            </span>\r\n         </li>\r\n         <li placenames-navigation role="menuitem" current="current" style="padding-right:10px"></li>\r\n         <li mars-version-display role="menuitem"></li>\r\n         <li style="width:10px"></li>\r\n      </ul>\r\n   </div>\r\n   <!--/.nav-collapse -->\r\n</div>\r\n<div class="contributorsLink" style="position: absolute; right:7px; bottom:15px">\r\n   <placenames-contributors-link></placenames-contributors-link>\r\n</div>\r\n<!-- Strap -->\r\n<div class="row">\r\n   <div class="col-md-12">\r\n      <div class="strap-blue">\r\n      </div>\r\n      <div class="strap-white">\r\n      </div>\r\n      <div class="strap-red">\r\n      </div>\r\n   </div>\r\n</div>'),e.put("placenames/maps/maps.html",'<div  ng-controller="MapsCtrl as maps">\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" >\r\n\t\t<div class="panel panel-default" style="padding:5px;" >\r\n\t\t\t<div class="panel-heading">\r\n\t\t\t\t<h3 class="panel-title">Layers</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-body">\r\n\t\t\t\t<div class="container-fluid">\r\n\t\t\t\t\t<div class="row" ng-repeat="layer in layersTab.layers" \r\n\t\t\t\t\t\t\tstyle="padding:7px;padding-left:10px;position:relative" ng-class-even="\'even\'" ng-class-odd="\'odd\'">\r\n\t\t\t\t\t\t<div style="position:relative;left:6px;">\r\n\t\t\t\t\t\t\t<a href="{{layer.metadata}}" target="_blank" \r\n\t\t\t\t\t\t\t\t\tclass="featureLink" title=\'View metadata related to "{{layer.name}}". (Opens new window.)\'>\r\n\t\t\t\t\t\t\t\t{{layer.name}}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<div class="pull-right" style="width:270px;" tooltip="Show on map. {{layer.help}}">\r\n\t\t\t\t\t\t\t\t<span style="padding-left:10px;width:240px;" class="pull-left"><explorer-layer-slider layer="layer.layer"></explorer-layer-slider></span>\r\n\t\t\t\t\t\t\t\t<button style="padding:2px 8px 2px 2px;" type="button" class="undecorated featureLink pull-right" href="javascript:;" \r\n\t\t\t\t\t\t\t\t\t\tng-click="maps.toggleLayer(layer)" >\r\n\t\t\t\t\t\t\t\t\t<i class="fa" ng-class="{\'fa-eye-slash\':(!layer.displayed), \'fa-eye active\':layer.displayed}"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),e.put("placenames/navigation/altthemes.html",'<span class="altthemes-container">\r\n\t<span ng-repeat="item in themes | altthemesMatchCurrent : current">\r\n       <a title="{{item.label}}" ng-href="{{item.url}}" class="altthemesItemCompact" target="_blank">\r\n         <span class="altthemes-icon" ng-class="item.className"></span>\r\n       </a>\r\n    </li>\r\n</span>'),e.put("placenames/panes/panes.html",'<div class="mapContainer" class="col-md-12" style="padding-right:0">\r\n   <div class="panesMapContainer" geo-map configuration="data.map"></div>\r\n   <div class="base-layer-controller">\r\n    \t<div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n   </div>\r\n   <restrict-pan bounds="data.map.position.bounds"></restrict-pan>\r\n</div>'),e.put("placenames/popover/popover.html",'<div class="placenames-popover {{direction}}" ng-class="containerClass" ng-show="show">\r\n  <div class="arrow"></div>\r\n  <div class="placenames-popover-inner" ng-transclude></div>\r\n</div>'),e.put("placenames/quicksearch/filteredsummary.html",'<div>\r\n      <div>\r\n         Matched {{state.persist.data.response.numFound | number}}\r\n      </div>\r\n      <div ng-if="type">Filtered by {{type}}: {{filters}}</div>\r\n      <div ng-if="authorities">For authorities: {{authorities}}</div>\r\n</div>'),e.put("placenames/quicksearch/quicksearch.html",'<div class="quickSearch" placenames-quick-search style="opacity:0.9"></div>\r\n'),e.put("placenames/reset/reset.html",'<button type="button" class="map-tool-toggle-btn" ng-click="reset()" title="Reset page">\r\n   <span class="hidden-sm">Reset</span>\r\n   <i class="fa fa-lg fa-refresh"></i>\r\n</button>'),e.put("placenames/results/item.html",'<div ng-mouseenter="vm.enter()" ng-mouseleave="vm.leave()">\r\n<div class="container-fluid">\r\n   <div class="row">\r\n      <div class="col-md-12 pn-header" >\r\n         <button type="button" class="undecorated" ng-click="vm.showPan(vm.item)"\r\n                tooltip-append-to-body="true" title="Zoom to location and mark." tooltip-placement="left" uib-tooltip="Zoom to location and mark">\r\n            <i class="fa fa-lg fa-flag-o"></i>\r\n         </button>\r\n         <span><a ng-href="{{vm.item | placenamesGoogleLink}}" target="_google"\r\n            title="View in Google maps. While the location will always be correct, Google will do a best guess at matching the Gazetteer name to its data.">{{vm.item.name}}</a></span>\r\n         <span class="pull-right">Record ID: {{vm.item.authorityId}}</span>\r\n      </div>\r\n   </div>\r\n</div>\r\n<div class="container-fluid">\r\n   <div class="row">\r\n      <div class="col-md-4"  title="An authority can be a state department or other statutory authority">Authority</div>\r\n      <div class="col-md-8">{{vm.item.authority}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4" title="Features belong to a category and categories belong to a group">Feature Type</div>\r\n      <div class="col-md-8">{{vm.item.feature}}</div>\r\n   </div>\r\n   <div class="row" title="Features belong to a category and categories belong to a group">\r\n      <div class="col-md-4">Category</div>\r\n      <div class="col-md-8">{{vm.item.category}}</div>\r\n   </div>\r\n   <div class="row" title="Features belong to a category and categories belong to a group">\r\n      <div class="col-md-4">Group</div>\r\n      <div class="col-md-8">{{vm.item.group}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Supply Date</div>\r\n      <div class="col-md-8" title="Date format is dd/mm/yyyy">{{vm.item.supplyDate | formatDate}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Lat / Lng</div>\r\n      <div class="col-md-8">\r\n         <span class="pn-numeric">\r\n            {{vm.item.location | itemLatitude}}&deg; / {{vm.item.location | itemLongitude}}&deg;\r\n         </span>\r\n      </div>\r\n   </div>\r\n\r\n</div>'),
e.put("placenames/results/results.html",'<div class="panel panel-default pn-container" ng-if="pr.data.searched" common-scroller buffer="200" more="pr.more()">\r\n   <div class="panel-heading" style="min-height:25px">\r\n      <span ng-if="pr.data.searched.item">\r\n         Showing selected feature\r\n      </span>\r\n      <span ng-if="!pr.data.searched.item">\r\n         Matched {{pr.data.searched.data.response.numFound | number}} features<span ng-if="!pr.data.searched.item && pr.data.searched.data.response.numFound > pr.data.searched.data.response.docs.length">, showing {{pr.data.searched.data.response.docs.length\r\n         | number}}</span>\r\n         <a href "javascript:void()" ng-if="!pr.data.searched.item && pr.data.searched.data.response.numFound > pr.data.searched.data.response.docs.length" ng-click="pr.more()" tooltip-placement="bottom" uib-tooltip="Scroll to the bottom of results or click here to load more matching features">\r\n            [Load more]\r\n         </a>\r\n      </span>\r\n      <span class="pull-right">\r\n         <a href "javascript:void()" ng-if="!pr.data.searched.item" ng-click="pr.showDownload = !pr.showDownload" tooltip-placement="bottom"\r\n            uib-tooltip="Package up for download all your search results...">\r\n            [\r\n            <span ng-if="!pr.showDownload">Download...</span>\r\n            <span ng-if="pr.showDownload">Hide download details</span>]\r\n         </a>\r\n         <a href "javascript:void()" ng-if="!pr.data.searched.item" ng-click="pr.clear()" tooltip-placement="bottom" uib-tooltip="Clear search results and search again">\r\n            [Clear results]\r\n         </a>\r\n      </span>\r\n      <placenames-search-filters ng-if="pr.data.searched"></placenames-search-filters>\r\n   </div>\r\n   <div class="panel-heading">\r\n      <placenames-results-item ng-if="pr.data.searched.item" item="pr.data.searched.item"></placenames-results-item>\r\n      <placenames-results-download data="pr.data.searched" ng-if="!pr.data.searched.item && pr.showDownload"></placenames-results-download>\r\n      <div class="pn-results-list" ng-if="!pr.data.searched.item" ng-repeat="doc in pr.data.searched.data.response.docs">\r\n         <placenames-results-item item="doc"></placenames-results-item>\r\n      </div>\r\n   </div>\r\n</div>\r\n<div class="panel panel-default pn-container" ng-if="!pr.data.searched">\r\n   <div class="panel-heading" style="min-height:25px">\r\n      <span>\r\n         No search results to show. Please conduct a search.\r\n      </span>\r\n   </div>\r\n</div>'),e.put("placenames/results/summary.html",'<span class="placenamesSearchSummary"\r\n      ng-if="state.searched.data.response.numFound">(Found {{state.searched.data.response.numFound | number}} features)</span>'),e.put("placenames/search/quicksearch.html",'<div class="search-text">\r\n   <div class="input-group input-group-sm">\r\n      <input type="text" ng-model="state.filter" placeholder="Match by feature name..." ng-model-options="{ debounce: 300}" typeahead-on-select="select($item, $model, $label)"\r\n         ng-disabled="state.searched" typeahead-template-url="placenames/search/typeahead.html" class="form-control" typeahead-min-length="0"\r\n         uib-typeahead="doc as doc.name for doc in loadDocs(state.filter)" typeahead-loading="loadingLocations" typeahead-no-results="noResults"\r\n         placenames-clear>\r\n\r\n      <span class="input-group-btn">\r\n         <button class="btn btn-primary" type="button" ng-click="search()" ng-hide="state.searched">Search</button>\r\n         <button class="btn btn-primary" type="button" ng-click="showFilters = !showFilters" ng-hide="state.searched" title="SHow/hide filters such as authority, group, category and feature type">Filters...</button>\r\n         <button class="btn btn-primary" type="button" ng-click="clear()" ng-show="state.searched">Clear Search Results</button>\r\n      </span>\r\n   </div>\r\n</div>\r\n<div class="filters" ng-show="showFilters" style="background-color: white; opacity:0.9">\r\n   <placenames-filters status="status"></placenames-filters>\r\n</div>'),e.put("placenames/search/search.html",'<placenames-results data="state"></placenames-results>\r\n'),e.put("placenames/search/searchfilters.html",'<div>\r\n   <div ng-if="data.filter">Matching names like "{{data.filter}}"</div>\r\n   <div ng-if="type">Filtered by {{type}}: {{filters}}</div>\r\n   <div ng-if="authorities">For authorities: {{authorities}}</div>\r\n</div>'),e.put("placenames/search/typeahead.html",'<a placenames-options ng-mouseenter="enter()" ng-mouseleave="leave()"  tooltip-append-to-body="true"\r\n               tooltip-placement="bottom" uib-tooltip-html="match.model | placenamesTooltip">\r\n   <span ng-bind-html="match.model.name | uibTypeaheadHighlight:query"></span>\r\n   (<span ng-bind-html="match.model.authorityId"></span>)\r\n</a>'),e.put("placenames/side-panel/side-panel-left.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="width: {{left.width}}px;" ng-class="{\'cbp-spmenu-open\': left.active}">\r\n    <a href="" title="Close panel" ng-click="closeLeft()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-left pull-right"></span>\r\n    </a>\r\n    <div ng-show="left.active === \'legend\'" class="left-side-menu-container">\r\n        <legend url="\'img/AustralianTopogaphyLegend.png\'" title="\'Map Legend\'"></legend>\r\n    </div>\r\n</div>'),e.put("placenames/side-panel/side-panel-right.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right noPrint" ng-attr-style="width:{{right.width}}" ng-class="{\'cbp-spmenu-open\': right.active}">\r\n    <a href="" title="Close panel" ng-click="closePanel()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-right pull-left"></span>\r\n    </a>\r\n    <div ng-show="right.active === \'search\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" placenames-search ></div>\r\n    </div>\r\n    <div ng-if="right.active === \'glossary\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" placenames-glossary></div>\r\n    </div>\r\n    <div ng-show="right.active === \'help\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" placenames-help></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'),e.put("placenames/side-panel/trigger.html",'<button ng-click="toggle()" type="button" class="map-tool-toggle-btn">\r\n   <span class="hidden-sm">{{name}}</span>\r\n   <ng-transclude></ng-transclude>\r\n   <i class="fa fa-lg" ng-class="iconClass"></i>\r\n</button>'),e.put("placenames/splash/splash.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">Place Names</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()" placenames-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n\t<div style="border-bottom:1px solid gray">\r\n\t\t<p>\r\n\t\t\tUsers can download the place names data which is licensed under Creative Commons.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tData can be downloaded from the portal at <strong>no charge</strong> and there is no limit to how many requests you can place (please check the file size before you download your results).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIf you need datasets in full, please contact <a href="clientservices@ga.gov.au">clientservices@ga.gov.au</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href="http://opentopo.sdsc.edu/gridsphere/gridsphere?cid=contributeframeportlet&gs_action=listTools" target="_blank">Click here for Free GIS Tools.</a>\r\n\t\t</p>\r\n\r\n\t\t<div style="padding:30px; padding-top:0; padding-bottom:40px; width:100%">\r\n\t\t\t<div class="pull-right">\r\n\t\t\t  \t<button type="button" class="btn btn-primary" ng-model="seenSplash" ng-focus ng-click="accept()">Continue</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-show="messages.length > 0" class="container" style="width:100%; max-height:250px; overflow-y:auto">\r\n\t\t<div class="row" ng-class-even="\'grayline\'" style="font-weight:bold">\r\n\t\t\t<div class="col-sm-12" ><h3>News</h3></div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row"ng-class-even="\'grayline\'" style="max-height:400px;overflow:auto" ng-repeat="message in messages | sortNotes">\r\n\t\t\t<div class="col-sm-12">\r\n\t\t\t\t<h4>{{message.title}} <span class="pull-right" style="font-size:70%">Created: {{message.creationDate | date : "dd/MM/yyyy"}}</span></h4>\r\n\t\t\t\t<div ng-bind-html="message.description"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),e.put("placenames/themes/themes.html",'<div class="dropdown themesdropdown">\r\n   <button class="btn btn-default dropdown-toggle themescurrent" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\r\n     Theme\r\n     <span class="caret"></span>\r\n   </button>\r\n   <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\r\n     <li ng-repeat="item in themes">\r\n        <a href="#" title="{{item.title}}" ng-href="{{item.url}}" class="themesItemCompact">\r\n          <span class="icsm-icon" ng-class="item.className"></span>\r\n          <strong style="vertical-align:top;font-size:110%">{{item.label}}</strong>\r\n        </a>\r\n     </li>\r\n   </ul>\r\n </div>'),e.put("placenames/toolbar/toolbar.html",'<div class="placenames-toolbar noPrint">\r\n    <div class="toolBarContainer">\r\n        <div>\r\n            <ul class="left-toolbar-items"></ul>\r\n            <ul class="right-toolbar-items">\r\n                <li>\r\n                    <panel-trigger panel-id="search" panel-width="540px" name="Search Results" icon-class="fa-list">\r\n                        <placenames-results-summary state="state"></placenames-results-summary>\r\n                    </panel-trigger>\r\n                </li>\r\n                <li reset-page></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>')}]);