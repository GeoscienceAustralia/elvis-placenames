"use strict";function ContributorsService(t){var e={show:!1,ingroup:!1,stick:!1};return t.get("placenames/resources/config/contributors.json").then(function(t){e.orgs=t.data}),{getState:function(){return e}}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){t.module("placenames.header",[]).controller("headerController",["$scope","$q","$timeout",function(t,e,n){var r=function(t){return t};t.$on("headerUpdated",function(e,n){t.headerConfig=r(n)})}]).directive("placenamesHeader",[function(){var e={current:"none",heading:"ICSM",headingtitle:"ICSM",helpurl:"help.html",helptitle:"Get help about ICSM",helpalttext:"Get help about ICSM",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"header/header.html",scope:{current:"=",breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(n,r,o){t.copy(e);t.forEach(e,function(t,e){e in n||(n[e]=t)})}}}]).factory("headerService",["$http",function(){}])}(angular),angular.module("placenames.contributors",[]).directive("placenamesContributors",["$interval","contributorsService",function(t,e){return{templateUrl:"contributors/contributors.html",scope:{},link:function(n,r){var o=void 0;n.contributors=e.getState(),n.over=function(){t.cancel(o),n.contributors.ingroup=!0},n.out=function(){o=t(function(){n.contributors.ingroup=!1},1e3)},n.unstick=function(){n.contributors.ingroup=n.contributors.show=n.contributors.stick=!1,r.find("a").blur()}}}}]).directive("placenamesContributorsLink",["$interval","contributorsService",function(t,e){return{restrict:"AE",templateUrl:"contributors/show.html",scope:{},link:function(n){var r=void 0;n.contributors=e.getState(),n.over=function(){t.cancel(r),n.contributors.show=!0},n.toggleStick=function(){n.contributors.stick=!n.contributors.stick,n.contributors.stick||(n.contributors.show=n.contributors.ingroup=!1)},n.out=function(){r=t(function(){n.contributors.show=!1},700)}}}}]).factory("contributorsService",ContributorsService).filter("activeContributors",function(){return function(t){return t?t.filter(function(t){return t.enabled}):[]}}),ContributorsService.$inject=["$http"],angular.module("placenames.altthemes",["placenames.storage"]).directive("altThemes",["altthemesService",function(t){return{restrict:"AE",templateUrl:"navigation/altthemes.html",scope:{current:"="},link:function(e){t.getThemes().then(function(t){e.themes=t}),t.getCurrentTheme().then(function(t){e.theme=t}),e.changeTheme=function(n){e.theme=n,t.setTheme(n.key)}}}}]).controller("altthemesCtrl",["altthemesService",function(t){this.service=t}]).filter("altthemesFilter",function(){return function(t,e){var n=[];return e?(t&&t.forEach(function(t){t.themes&&t.themes.some(function(t){return t===e.key})&&n.push(t)}),n):t}}).factory("altthemesService",["$q","$http","storageService",function(t,e,n){var r="placenames.current.theme",o="placenames/resources/config/themes.json",i="All",a=[],s=this;return this.themes=[],this.theme=null,n.getItem(r).then(function(t){t||(t=i),e.get(o,{cache:!0}).then(function(e){var n=e.data.themes;s.themes=n,s.theme=n[t],angular.forEach(n,function(t,e){t.key=e}),a.forEach(function(t){t.resolve(s.theme)})})}),this.getCurrentTheme=function(){if(this.theme)return t.when(s.theme);var e=t.defer();return a.push(e),e.promise},this.getThemes=function(){return e.get(o,{cache:!0}).then(function(t){return t.data.themes})},this.setTheme=function(t){this.theme=this.themes[t],n.setItem(r,t)},this}]).filter("altthemesEnabled",function(){return function(t){return t?t.filter(function(t){return!!t.enabled}):t}}).filter("altthemesMatchCurrent",function(){return function(t,e){return t?t.filter(function(t){return!!t.keys.find(function(t){return t===e})}):t}}),angular.module("placenames.navigation",["placenames.altthemes"]).directive("placenamesNavigation",[function(){return{restrict:"AE",template:"<alt-themes current='current'></alt-themes>",scope:{current:"=?"},link:function(t){t.username="Anonymous",t.current||(t.current="none")}}}]).factory("navigationService",[function(){return{}}]),angular.module("placenames.storage",[]).factory("storageService",["$log","$q",function(t,e){var n="elvis.placenames";return{setGlobalItem:function(t,e){this._setItem("_system",t,e)},setItem:function(t,e){this._setItem(n,t,e)},_setItem:function(e,n,r){t.debug("Fetching state for key locally"+n),localStorage.setItem(e+"."+n,JSON.stringify(r))},getGlobalItem:function(t){return this._getItem("_system",t)},getItem:function(t){var r=e.defer();return this._getItem(n,t).then(function(t){r.resolve(t)}),r.promise},_getItem:function(n,r){t.debug("Fetching state locally for key "+r);var o=localStorage.getItem(n+"."+r);if(o)try{o=JSON.parse(o)}catch(i){}return e.when(o)}}}]);var RootCtrl=function t(e,n){var r=this;_classCallCheck(this,t),this.map=n.map,e.getConfig().then(function(t){r.data=t})};RootCtrl.$invoke=["configService","mapService"],angular.module("AntarcticApp",["antarctic.maps","antarctic.templates","explorer.config","explorer.confirm","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.info","explorer.message","explorer.modal","explorer.persist","explorer.version","placenames.contributors","placenames.header","placenames.navigation","exp.ui.templates","explorer.map.templates","ui.bootstrap","ngAutocomplete","ngSanitize","page.footer"]).config(["configServiceProvider","persistServiceProvider","projectsServiceProvider","versionServiceProvider",function(t,e,n,r){t.location("placenames/resources/config/config.json?v=4"),t.dynamicLocation("placenames/resources/config/configclient.json?"),r.url("placenames/assets/package.json"),e.handler("local"),n.setProject("placenames")}]).run(["mapService",function(t){window.map=t.map}]).controller("RootCtrl",RootCtrl).filter("bytes",function(){return function(t,e){if(isNaN(parseFloat(t))||!isFinite(t))return"-";"undefined"==typeof e&&(e=0);var n=["bytes","kB","MB","GB","TB","PB"],r=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(r))).toFixed(e)+" "+n[r]}}).factory("userService",[function(){function t(){return!0}return{login:t,hasAcceptedTerms:t,setAcceptedTerms:t,getUsername:function(){return"anon"}}}]),"every"in Array.prototype||(Array.prototype.every=function(t,e){for(var n=0,r=this.length;n<r;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,o=function(t){var e=n(t);return Math.min(Math.max(e,0),r)};return function(t){var n=this,r=Object(t);if(null===t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i=arguments.length>1?arguments[1]:void 0,a=void 0;if("undefined"!=typeof i){if(!e(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s=o(r.length),l=e(n)?Object(new n(s)):new Array(s),c=0,u=void 0;c<s;)u=r[c],i?l[c]="undefined"==typeof a?i(u,c):i.call(a,u,c):l[c]=u,c+=1;return l.length=s,l}}()),L.Graticule=L.GeoJSON.extend({options:{style:{color:"#333",weight:1},interval:20},initialize:function(t){L.Util.setOptions(this,t),this._layers={},this.options.sphere?this.addData(this._getFrame()):this.addData(this._getGraticule())},_getFrame:function(){return{type:"Polygon",coordinates:[this._getMeridian(-180).concat(this._getMeridian(180).reverse())]}},_getGraticule:function(){for(var t=[],e=this.options.interval,n=0;n<=180;n+=e)t.push(this._getFeature(this._getMeridian(n),{name:n?n.toString()+"째 E":"Prime meridian"})),0!==n&&t.push(this._getFeature(this._getMeridian(-n),{name:n.toString()+"째 W"}));for(var r=0;r<=90;r+=e)t.push(this._getFeature(this._getParallel(r),{name:r?r.toString()+"째 N":"Equator"})),0!==r&&t.push(this._getFeature(this._getParallel(-r),{name:r.toString()+"째 S"}));return{type:"FeatureCollection",features:t}},_getMeridian:function(t){t=this._lngFix(t);for(var e=[],n=-90;n<=90;n++)e.push([t,n]);return e},_getParallel:function(t){for(var e=[],n=-180;n<=180;n++)e.push([this._lngFix(n),t]);return e},_getFeature:function(t,e){return{type:"Feature",geometry:{type:"LineString",coordinates:t},properties:e}},_lngFix:function(t){return t>=180?179.999999:t<=-180?-179.999999:t}}),L.graticule=function(t){return new L.Graticule(t)};var MapService=function e(){_classCallCheck(this,e);var t=[67733.46880027094,33866.73440013547,16933.367200067736,8466.683600033868,4233.341800016934,2116.670900008467,1058.3354500042335],n=L.bounds([-24925916.518499706,-11159088.984844638],[24925916.518499706,11159088.984844638]),r=new L.Proj.CRS("EPSG:3031","+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",{resolutions:t,origin:[-30636100,30636100],bounds:n});r.projection.bounds=n;var o=this.map=L.map("mappo",{center:[-90,0],zoom:2,maxZoom:8,minZoom:1,crs:r}),i="//map1{s}.vis.earthdata.nasa.gov/wmts-antarctic/{layer}/default/{time}/{tileMatrixSet}/{z}/{y}/{x}.jpg",a={layer:"MODIS_Aqua_CorrectedReflectance_TrueColor",tileMatrixSet:"EPSG3031_250m",format:"image%2Fjpeg",time:"2013-12-01",tileSize:512,subdomains:"abc",noWrap:!0,continuousWorld:!0,attribution:"<a href='https://wiki.earthdata.nasa.gov/display/GIBS'>NASA EOSDIS GIBS</a>"};i="https://tiles{s}.arcgis.com/tiles/wfNKYeHsOyaFyPw3/arcgis/rest/services/Antarctic_Hillshade_and_Bathymetric_Base_Map_SSP/MapServer/tile/{z}/{y}/{x}",a={layer:"MODIS_Aqua_CorrectedReflectance_TrueColor",format:"image%2Fpng",tileSize:256,subdomains:"1234",noWrap:!0,continuousWorld:!0,attribution:"<a href='.'>Geoscience Australia</a>"};var s=this.layer=L.tileLayer(i,a),l=s.getTileUrl;s.getTileUrl=function(t){var e=Math.pow(2,s._getZoomForUrl()+2);return t.x<0?"":t.y<0?"":t.x>=e?"":t.y>=e?"":l.call(s,t)},o.addLayer(s),L.control.scale({imperial:!1}).addTo(o),L.marker([-90,90]).addTo(o),L.marker([-88,88]).addTo(o),L.marker([-80,90]).addTo(o),L.marker([-78,88]).addTo(o),L.marker([-70,90]).addTo(o),L.marker([-68,88]).addTo(o)};angular.module("antarctic.maps",[]).service("mapService",[function(){new MapService}]),L.Control.MousePosition=L.Control.extend({options:{position:"bottomleft",separator:" : ",emptyString:"Unavailable",lngFirst:!1,numDigits:5,elevGetter:void 0,lngFormatter:void 0,latFormatter:void 0,prefix:""},onAdd:function(t){return this._container=L.DomUtil.create("div","leaflet-control-mouseposition"),L.DomEvent.disableClickPropagation(this._container),t.on("mousemove",this._onMouseMove,this),this._container.innerHTML=this.options.emptyString,this._container},onRemove:function(t){t.off("mousemove",this._onMouseMove)},_onMouseHover:function(){var t=this._hoverInfo;this._hoverInfo=void 0,this.options.elevGetter(t).then(function(t){this._hoverInfo||(this._container.innerHTML=this.options.prefix+" "+t+" "+this._latLngValue)}.bind(this))},_onMouseMove:function(t){var e=t.latlng.wrap();lng=this.options.lngFormatter?this.options.lngFormatter(e.lng):L.Util.formatNum(e.lng,this.options.numDigits),lat=this.options.latFormatter?this.options.latFormatter(e.lat):L.Util.formatNum(e.lat,this.options.numDigits),this._latLngValue=this.options.lngFirst?lng+this.options.separator+lat:lat+this.options.separator+lng,this.options.elevGetter&&(this._hoverInfo&&window.clearTimeout(this._hoverInfo.timeout),this._hoverInfo={lat:e.lat,lng:e.lng,timeout:window.setTimeout(this._onMouseHover.bind(this),400)}),this._container.innerHTML=this.options.prefix+" "+this._latLngValue}}),L.Map.mergeOptions({positionControl:!1}),L.Map.addInitHook(function(){this.options.positionControl&&(this.positionControl=new L.Control.MousePosition,this.addControl(this.positionControl))}),L.control.mousePosition=function(t){return new L.Control.MousePosition(t)},angular.module("antarctic.templates",[]).run(["$templateCache",function(t){t.put("header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n   <div class="navbar-header">\r\n\r\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n         <span class="sr-only">Toggle navigation</span>\r\n         <span class="icon-bar"></span>\r\n         <span class="icon-bar"></span>\r\n         <span class="icon-bar"></span>\r\n      </button>\r\n\r\n      <a href="/" class="appTitle visible-xs">\r\n         <h1 style="font-size:120%">{{heading}}</h1>\r\n      </a>\r\n   </div>\r\n   <div class="navbar-collapse collapse ga-header-collapse">\r\n      <ul class="nav navbar-nav">\r\n         <li class="hidden-xs">\r\n            <a href="/">\r\n               <h1 class="applicationTitle">{{heading}}</h1>\r\n            </a>\r\n         </li>\r\n      </ul>\r\n      <ul class="nav navbar-nav navbar-right nav-icons">\r\n         <li role="menuitem" style="padding-right:10px;position: relative;top: -3px;">\r\n            <span class="altthemes-container">\r\n               <span>\r\n                  <a title="Location INformation Knowledge platform (LINK)" href="http://fsdf.org.au/" target="_blank">\r\n                     <img alt="FSDF" src="placenames/resources/img/FSDFimagev4.0.png" style="height: 66px">\r\n                  </a>\r\n               </span>\r\n            </span>\r\n         </li>\r\n         <li placenames-navigation role="menuitem" current="current" style="padding-right:10px"></li>\r\n         <li mars-version-display role="menuitem"></li>\r\n         <li style="width:10px"></li>\r\n      </ul>\r\n   </div>\r\n   <!--/.nav-collapse -->\r\n</div>\r\n<div class="contributorsLink" style="position: absolute; right:7px; bottom:15px">\r\n   <placenames-contributors-link></placenames-contributors-link>\r\n</div>\r\n<!-- Strap -->\r\n<div class="row">\r\n   <div class="col-md-12">\r\n      <div class="strap-blue">\r\n      </div>\r\n      <div class="strap-white">\r\n      </div>\r\n      <div class="strap-red">\r\n      </div>\r\n   </div>\r\n</div>'),t.put("contributors/contributors.html",'<span class="contributors" ng-mouseenter="over()" ng-mouseleave="out()" style="z-index:1500"\r\n      ng-class="(contributors.show || contributors.ingroup || contributors.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated contributors-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div ng-repeat="contributor in contributors.orgs | activeContributors" style="text-align:cnter">\r\n      <a ng-href="{{contributor.href}}" name="contributors{{$index}}" title="{{contributor.title}}" target="_blank">\r\n         <img ng-src="{{contributor.image}}" alt="{{contributor.title}}" class="elvis-logo" ng-class="contributor.class"></img>\r\n      </a>\r\n   </div>\r\n</span>'),t.put("contributors/show.html",'<a ng-mouseenter="over()" ng-mouseleave="out()" class="contributors-link" title="Click to lock/unlock contributors list."\r\n      ng-click="toggleStick()" href="#contributors0">Contributors</a>'),t.put("navigation/altthemes.html",'<span class="altthemes-container">\r\n\t<span ng-repeat="item in themes | altthemesMatchCurrent : current">\r\n       <a title="{{item.label}}" ng-href="{{item.url}}" class="altthemesItemCompact" target="_blank">\r\n         <span class="altthemes-icon" ng-class="item.className"></span>\r\n       </a>\r\n    </li>\r\n</span>')}]);